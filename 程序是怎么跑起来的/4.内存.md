# 4 有棱有角的内存

## 4.1 内存的物理机制

内存实际上是一种名为__内存IC__的电子元件，包括RAM（DRAM、SRAM）、ROM等多种形式。

__内存IC__中有大量引脚。比如，一个内存IC中有：
- 电源（VCC、GND，VCC接入5V，GND接入0V为开机）
- 地址信号（如A0～A9，10个引脚，表示可以指定2^10=1024=1K个地址，即数据的存储场所）
- 数据信号（如D0～D7，8个引脚，表示一次可以输入输出8bit（1字节）的数据）
- 控制信号（RD、WR，RD信号为1时表示读取数据，WR为1时表示写入数据）

那么，这个内存IC可以存储1024个1字节的数据，即这个内存的容量为1KB。

## 4.2 内存的逻辑模型
可以想象成每层都存储着数据的楼房。编程语言中的 __数据类型__ 表示存储的是何种类型的数据。从内存看，就是占用的内存大小。比如`char`表示1字节长度，`short`表示2字节长度，`long`表示4字节长度。

 >  - 低字节序： 将多字节数据的低位字节存储在内存低位地址的方式
 >  - 高字节序： 将多字节数据的高位字节存储在内存低位地址的方式

## 4.3 指针
__指针__ 也是一种变量，但它表示的不是数据的值，而是数据的内存的地址。
如`short *d; // char类型的指针d的定义`，假设`d`的值是100，使用`d`时就能够从编号100和101的地址中读写2个字节的数据。

## 4.4 数组
__数组__ 是指多个同样数据类型的数据在内存中连续排列的形式。作为数据元素的数据被连续的编号，即 __索引__ 区分开。
如`char g[100]`，即可以使用`g[0]`~`g[99]`这100个元素，且一次能够读写的内存大小是1字节。
数组是内存的使用方法的基础，因为数组和内存的物理构造是一样的。1字节类型的数组就和内存完全一致。编程中，循环中使用数组，就很容易达到按顺序读出或写入数组元素的目的。但这也意味着较长的耗时。

## 4.5 栈、队列以及环形缓冲区
栈和队列，都可以不通过指定地址和索引来对数组的元素进行读写。适用于临时保存计算过程中的数据等。
 - __栈__：LIFO，后入先出，如“干草堆积如山”，暂时舍弃当前的数据，随后再原貌还原。
 - __队列__： FIFO， 先入先出，如“排队”。

在程序中实现栈和队列，即定义一个数组，以及对数组进行读写的函数对。
队列一般是以 __环形缓冲区__ 的方式来实现的。如从数组的起始位置开始存储数据，读出时再按顺序读出。在数组的末尾写入数据后，后一个数据就会被写入数组的起始位置
![环形缓冲区](https://tse2-mm.cn.bing.net/th/id/OIP-C.XRx1TCPxCQ4yKIttmAnxIAAAAA?pid=ImgDet&rs=1)